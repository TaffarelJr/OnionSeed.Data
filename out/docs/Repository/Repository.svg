<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1153px" preserveAspectRatio="none" style="width:1435px;height:1153px;" version="1.1" viewBox="0 0 1435 1153" width="1435px" zoomAndPan="magnify"><defs><filter height="300%" id="f17qv0zno5aheh" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="149" x="646.5" y="18.6855">Repository Pattern</text><!--cluster AppDll--><polygon fill="#FFA500" filter="url(#f17qv0zno5aheh)" points="562,211.6406,572,201.6406,1138,201.6406,1138,614.6406,1128,624.6406,562,624.6406,562,211.6406" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1128" x2="1137" y1="211.6406" y2="202.6406"/><line style="stroke: #000000; stroke-width: 1.5;" x1="562" x2="1128" y1="211.6406" y2="211.6406"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1128" x2="1128" y1="211.6406" y2="624.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="84" x="804" y="229.1738">Custom App</text><!--cluster Domain--><polygon fill="#FFFFFF" filter="url(#f17qv0zno5aheh)" points="942,250.6406,1000,250.6406,1007,274.25,1114,274.25,1114,600.6406,942,600.6406,942,250.6406" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="942" x2="1007" y1="274.25" y2="274.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="52" x="946" y="267.1738">Domain</text><!--cluster DomainServices--><polygon fill="#FFFFFF" filter="url(#f17qv0zno5aheh)" points="586,285.1406,706,285.1406,713,308.75,918,308.75,918,600.6406,586,600.6406,586,285.1406" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="586" x2="713" y1="308.75" y2="308.75"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="590" y="301.6738">DomainServices</text><!--cluster SqlServer--><polygon fill="#90EE90" filter="url(#f17qv0zno5aheh)" points="254,283.1406,264,273.1406,538,273.1406,538,382.1406,528,392.1406,254,392.1406,254,283.1406" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="528" x2="537" y1="283.1406" y2="274.1406"/><line style="stroke: #000000; stroke-width: 1.5;" x1="254" x2="528" y1="283.1406" y2="283.1406"/><line style="stroke: #000000; stroke-width: 1.5;" x1="528" x2="528" y1="283.1406" y2="392.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="208" x="288" y="300.6738">OnionSeed.Data.SqlServer.dll</text><!--cluster OnionSeed--><polygon fill="#ADD8E6" filter="url(#f17qv0zno5aheh)" points="338,700.6406,348,690.6406,1115,690.6406,1115,910.6406,1105,920.6406,338,920.6406,338,700.6406" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1105" x2="1114" y1="700.6406" y2="691.6406"/><line style="stroke: #000000; stroke-width: 1.5;" x1="338" x2="1105" y1="700.6406" y2="700.6406"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1105" x2="1105" y1="700.6406" y2="920.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="134" x="655.5" y="718.1738">OnionSeed.Data.dll</text><!--class Domain.Car--><rect fill="#FEFECE" filter="url(#f17qv0zno5aheh)" height="117.1797" id="Domain.Car" style="stroke: #A80036; stroke-width: 1.5;" width="140" x="958" y="286.6406"/><ellipse cx="1013.75" cy="302.6406" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1016.5156,298.5156 Q1016.6719,298.2969 1016.8594,298.1875 Q1017.0469,298.0781 1017.2656,298.0781 Q1017.6406,298.0781 1017.875,298.3438 Q1018.1094,298.5938 1018.1094,299.2031 L1018.1094,300.6563 Q1018.1094,301.2656 1017.875,301.5313 Q1017.6406,301.7969 1017.2656,301.7969 Q1016.9219,301.7969 1016.7188,301.5938 Q1016.5156,301.4063 1016.4063,300.8906 Q1016.3594,300.5313 1016.1719,300.3438 Q1015.8438,299.9688 1015.2344,299.75 Q1014.625,299.5313 1014,299.5313 Q1013.2344,299.5313 1012.5938,299.8594 Q1011.9688,300.1875 1011.4688,300.9375 Q1010.9844,301.6875 1010.9844,302.7188 L1010.9844,303.8125 Q1010.9844,305.0469 1011.875,305.875 Q1012.7656,306.6875 1014.3594,306.6875 Q1015.2969,306.6875 1015.9531,306.4375 Q1016.3438,306.2813 1016.7656,305.8438 Q1017.0313,305.5781 1017.1719,305.5 Q1017.3281,305.4219 1017.5313,305.4219 Q1017.8594,305.4219 1018.1094,305.6875 Q1018.375,305.9375 1018.375,306.2813 Q1018.375,306.625 1018.0313,307.0313 Q1017.5313,307.6094 1016.7344,307.9375 Q1015.6563,308.3906 1014.3594,308.3906 Q1012.8438,308.3906 1011.6406,307.7656 Q1010.6563,307.2656 1009.9688,306.2031 Q1009.2813,305.125 1009.2813,303.8438 L1009.2813,302.6875 Q1009.2813,301.3594 1009.8906,300.2188 Q1010.5156,299.0625 1011.6094,298.4531 Q1012.7031,297.8281 1013.9375,297.8281 Q1014.6719,297.8281 1015.3125,298 Q1015.9688,298.1563 1016.5156,298.5156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="20" x="1034.25" y="307.5508">Car</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="959" x2="1097" y1="318.6406" y2="318.6406"/><ellipse cx="969" cy="331.0586" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="89" x="978" y="334.0596">Id : Guid {get; set;}</text><ellipse cx="969" cy="344.8945" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="113" x="978" y="347.8955">Name : string {get; set;}</text><ellipse cx="969" cy="358.7305" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="114" x="978" y="361.7314">Model : string {get; set;}</text><ellipse cx="969" cy="372.5664" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="102" x="978" y="375.5674">Vin : string {get; set;}</text><ellipse cx="969" cy="386.4023" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="109" x="978" y="389.4033">Color : Color {get; set;}</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="959" x2="1097" y1="395.8203" y2="395.8203"/><!--class Domain.ICar--><rect fill="#FEFECE" filter="url(#f17qv0zno5aheh)" height="103.3438" id="Domain.ICar" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="987.5" y="481.6406"/><ellipse cx="1024.55" cy="497.6406" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1025.5031,494.2813 L1025.5031,500.9375 L1027.2219,500.9375 Q1027.8313,500.9375 1028.0969,501.1719 Q1028.3625,501.4063 1028.3625,501.7969 Q1028.3625,502.1719 1028.0969,502.4063 Q1027.8313,502.6406 1027.2219,502.6406 L1022.0813,502.6406 Q1021.4719,502.6406 1021.2063,502.4063 Q1020.9406,502.1719 1020.9406,501.7813 Q1020.9406,501.4063 1021.2063,501.1719 Q1021.4719,500.9375 1022.0813,500.9375 L1023.8,500.9375 L1023.8,494.2813 L1022.0813,494.2813 Q1021.4719,494.2813 1021.2063,494.0469 Q1020.9406,493.8125 1020.9406,493.4219 Q1020.9406,493.0469 1021.2063,492.8125 Q1021.4719,492.5781 1022.0813,492.5781 L1027.2219,492.5781 Q1027.8313,492.5781 1028.0969,492.8125 Q1028.3625,493.0469 1028.3625,493.4219 Q1028.3625,493.8125 1028.0969,494.0469 Q1027.8313,494.2813 1027.2219,494.2813 L1025.5031,494.2813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="24" x="1043.45" y="502.5508">ICar</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="988.5" x2="1091.5" y1="513.6406" y2="513.6406"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="92" x="993.5" y="529.0596">Name : string {get;}</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="93" x="993.5" y="542.8955">Model : string {get;}</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="993.5" y="556.7314">Vin : string {get;}</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="88" x="993.5" y="570.5674">Color : Color {get;}</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="988.5" x2="1091.5" y1="576.9844" y2="576.9844"/><!--class DomainServices.CarRepository--><rect fill="#FEFECE" filter="url(#f17qv0zno5aheh)" height="48" id="DomainServices.CarRepository" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="696.5" y="321.1406"/><ellipse cx="711.5" cy="337.1406" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M714.2656,333.0156 Q714.4219,332.7969 714.6094,332.6875 Q714.7969,332.5781 715.0156,332.5781 Q715.3906,332.5781 715.625,332.8438 Q715.8594,333.0938 715.8594,333.7031 L715.8594,335.1563 Q715.8594,335.7656 715.625,336.0313 Q715.3906,336.2969 715.0156,336.2969 Q714.6719,336.2969 714.4688,336.0938 Q714.2656,335.9063 714.1563,335.3906 Q714.1094,335.0313 713.9219,334.8438 Q713.5938,334.4688 712.9844,334.25 Q712.375,334.0313 711.75,334.0313 Q710.9844,334.0313 710.3438,334.3594 Q709.7188,334.6875 709.2188,335.4375 Q708.7344,336.1875 708.7344,337.2188 L708.7344,338.3125 Q708.7344,339.5469 709.625,340.375 Q710.5156,341.1875 712.1094,341.1875 Q713.0469,341.1875 713.7031,340.9375 Q714.0938,340.7813 714.5156,340.3438 Q714.7813,340.0781 714.9219,340 Q715.0781,339.9219 715.2813,339.9219 Q715.6094,339.9219 715.8594,340.1875 Q716.125,340.4375 716.125,340.7813 Q716.125,341.125 715.7813,341.5313 Q715.2813,342.1094 714.4844,342.4375 Q713.4063,342.8906 712.1094,342.8906 Q710.5938,342.8906 709.3906,342.2656 Q708.4063,341.7656 707.7188,340.7031 Q707.0313,339.625 707.0313,338.3438 L707.0313,337.1875 Q707.0313,335.8594 707.6406,334.7188 Q708.2656,333.5625 709.3594,332.9531 Q710.4531,332.3281 711.6875,332.3281 Q712.4219,332.3281 713.0625,332.5 Q713.7188,332.6563 714.2656,333.0156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="79" x="725.5" y="342.0508">CarRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="697.5" x2="806.5" y1="353.1406" y2="353.1406"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="697.5" x2="806.5" y1="361.1406" y2="361.1406"/><!--class DomainServices.ICarRepository--><rect fill="#FEFECE" filter="url(#f17qv0zno5aheh)" height="103.3438" id="DomainServices.ICarRepository" style="stroke: #A80036; stroke-width: 1.5;" width="299" x="602.5" y="481.6406"/><ellipse cx="706.25" cy="497.6406" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M707.2031,494.2813 L707.2031,500.9375 L708.9219,500.9375 Q709.5313,500.9375 709.7969,501.1719 Q710.0625,501.4063 710.0625,501.7969 Q710.0625,502.1719 709.7969,502.4063 Q709.5313,502.6406 708.9219,502.6406 L703.7813,502.6406 Q703.1719,502.6406 702.9063,502.4063 Q702.6406,502.1719 702.6406,501.7813 Q702.6406,501.4063 702.9063,501.1719 Q703.1719,500.9375 703.7813,500.9375 L705.5,500.9375 L705.5,494.2813 L703.7813,494.2813 Q703.1719,494.2813 702.9063,494.0469 Q702.6406,493.8125 702.6406,493.4219 Q702.6406,493.0469 702.9063,492.8125 Q703.1719,492.5781 703.7813,492.5781 L708.9219,492.5781 Q709.5313,492.5781 709.7969,492.8125 Q710.0625,493.0469 710.0625,493.4219 Q710.0625,493.8125 709.7969,494.0469 Q709.5313,494.2813 708.9219,494.2813 L707.2031,494.2813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="83" x="726.75" y="502.5508">ICarRepository</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="603.5" x2="900.5" y1="513.6406" y2="513.6406"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="603.5" x2="900.5" y1="521.6406" y2="521.6406"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="219" x="608.5" y="537.0596">GetByName(string value) : IEnumerable&lt;ICar&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="287" x="608.5" y="550.8955">GetByModelAsync(string value) : Task&lt;IEnumerable&lt;ICar&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="205" x="608.5" y="564.7314">GetByVinAsync(string value) : Task&lt;ICar&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="127" x="608.5" y="578.5674">Paint(ICar car, Color color)</text><!--class SqlRepository--><rect fill="#FEFECE" filter="url(#f17qv0zno5aheh)" height="61.8359" id="SqlRepository" style="stroke: #A80036; stroke-width: 1.5;" width="200" x="322" y="314.1406"/><ellipse cx="337" cy="330.1406" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M339.1875,331.9063 L335.0469,331.9063 L334.625,332.9375 L335.0469,332.9375 Q335.6563,332.9375 335.9219,333.1719 Q336.1875,333.4063 336.1875,333.7969 Q336.1875,334.1719 335.9219,334.4063 Q335.6563,334.6406 335.0469,334.6406 L332.75,334.6406 Q332.1406,334.6406 331.8906,334.4063 Q331.625,334.1719 331.625,333.7813 Q331.625,333.4063 331.9063,333.1719 Q332.1719,332.9219 332.7969,332.9375 L335.4688,326.2813 L334.3594,326.2813 Q333.75,326.2813 333.4844,326.0469 Q333.2188,325.8125 333.2188,325.4219 Q333.2188,325.0469 333.4844,324.8125 Q333.75,324.5781 334.3594,324.5781 L338.0313,324.5781 L341.4219,332.9375 Q342.0156,332.9375 342.2031,333.0781 Q342.5938,333.3438 342.5938,333.7969 Q342.5938,334.1719 342.3281,334.4063 Q342.0781,334.6406 341.4688,334.6406 L339.1719,334.6406 Q338.5625,334.6406 338.2969,334.4063 Q338.0313,334.1719 338.0313,333.7813 Q338.0313,333.4063 338.2969,333.1719 Q338.5625,332.9375 339.1719,332.9375 L339.5938,332.9375 L339.1875,331.9063 Z M338.4688,330.2031 L337.1094,326.8281 L335.7344,330.2031 L338.4688,330.2031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="77" x="351" y="335.0508">SqlRepository</text><rect fill="#FFFFFF" height="17.0938" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" width="89" x="436" y="311.1406"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="87" x="437" y="324.5977">TEntity,TIdentity</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="323" x2="521" y1="346.1406" y2="346.1406"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="323" x2="521" y1="354.1406" y2="354.1406"/><ellipse cx="333" cy="366.5586" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="152" x="342" y="369.5596">ctor(SqlConnection connection)</text><!--class IRepository--><rect fill="#FEFECE" filter="url(#f17qv0zno5aheh)" height="172.5234" id="IRepository" style="stroke: #A80036; stroke-width: 1.5;" width="225" x="354.5" y="731.6406"/><ellipse cx="387.05" cy="747.6406" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M388.0031,744.2813 L388.0031,750.9375 L389.7219,750.9375 Q390.3313,750.9375 390.5969,751.1719 Q390.8625,751.4063 390.8625,751.7969 Q390.8625,752.1719 390.5969,752.4063 Q390.3313,752.6406 389.7219,752.6406 L384.5813,752.6406 Q383.9719,752.6406 383.7063,752.4063 Q383.4406,752.1719 383.4406,751.7813 Q383.4406,751.4063 383.7063,751.1719 Q383.9719,750.9375 384.5813,750.9375 L386.3,750.9375 L386.3,744.2813 L384.5813,744.2813 Q383.9719,744.2813 383.7063,744.0469 Q383.4406,743.8125 383.4406,743.4219 Q383.4406,743.0469 383.7063,742.8125 Q383.9719,742.5781 384.5813,742.5781 L389.7219,742.5781 Q390.3313,742.5781 390.5969,742.8125 Q390.8625,743.0469 390.8625,743.4219 Q390.8625,743.8125 390.5969,744.0469 Q390.3313,744.2813 389.7219,744.2813 L388.0031,744.2813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="63" x="404.95" y="752.5508">IRepository</text><rect fill="#FFFFFF" height="17.0938" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" width="89" x="493.5" y="728.6406"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="87" x="494.5" y="742.0977">TEntity,TIdentity</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="355.5" x2="578.5" y1="763.6406" y2="763.6406"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="355.5" x2="578.5" y1="771.6406" y2="771.6406"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="146" x="360.5" y="787.0596">AddAsync(TEntity item) : Task</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="192" x="360.5" y="800.8955">AddOrUpdateAsync(TEntity item) : Task</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="160" x="360.5" y="814.7314">UpdateAsync(TEntity item) : Task</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="165" x="360.5" y="828.5674">RemoveAsync(TEntity item) : Task</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="360.5" y="842.4033">RemoveAsync(TIdentity id) : Task</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="194" x="360.5" y="856.2393">TryAddAsync(TEntity item) : Task&lt;bool&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="208" x="360.5" y="870.0752">TryUpdateAsync(TEntity item) : Task&lt;bool&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="213" x="360.5" y="883.9111">TryRemoveAsync(TEntity item) : Task&lt;bool&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="210" x="360.5" y="897.7471">TryRemoveAsync(TIdentity id) : Task&lt;bool&gt;</text><!--class IQueryService--><rect fill="#FEFECE" filter="url(#f17qv0zno5aheh)" height="103.3438" id="IQueryService" style="stroke: #A80036; stroke-width: 1.5;" width="233" x="662.5" y="766.6406"/><ellipse cx="691.9" cy="782.6406" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M692.8531,779.2813 L692.8531,785.9375 L694.5719,785.9375 Q695.1813,785.9375 695.4469,786.1719 Q695.7125,786.4063 695.7125,786.7969 Q695.7125,787.1719 695.4469,787.4063 Q695.1813,787.6406 694.5719,787.6406 L689.4313,787.6406 Q688.8219,787.6406 688.5563,787.4063 Q688.2906,787.1719 688.2906,786.7813 Q688.2906,786.4063 688.5563,786.1719 Q688.8219,785.9375 689.4313,785.9375 L691.15,785.9375 L691.15,779.2813 L689.4313,779.2813 Q688.8219,779.2813 688.5563,779.0469 Q688.2906,778.8125 688.2906,778.4219 Q688.2906,778.0469 688.5563,777.8125 Q688.8219,777.5781 689.4313,777.5781 L694.5719,777.5781 Q695.1813,777.5781 695.4469,777.8125 Q695.7125,778.0469 695.7125,778.4219 Q695.7125,778.8125 695.4469,779.0469 Q695.1813,779.2813 694.5719,779.2813 L692.8531,779.2813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="78" x="709.1" y="787.5508">IQueryService</text><rect fill="#FFFFFF" height="17.0938" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" width="89" x="809.5" y="763.6406"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="87" x="810.5" y="777.0977">TEntity,TIdentity</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="663.5" x2="894.5" y1="798.6406" y2="798.6406"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="663.5" x2="894.5" y1="806.6406" y2="806.6406"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="149" x="668.5" y="822.0596">GetCountAsync() : Task&lt;long&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="215" x="668.5" y="835.8955">GetAllAsync() : Task&lt;IEnumerable&lt;TEntity&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="205" x="668.5" y="849.7314">GetByIdAsync(TIdentity id) : Task&lt;TEntity&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="221" x="668.5" y="863.5674">TryGetByIdAsync(TIdentity id) : Task&lt;TEntity&gt;</text><!--class IEntity--><rect fill="#FEFECE" filter="url(#f17qv0zno5aheh)" height="61.8359" id="IEntity" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="981.5" y="787.1406"/><ellipse cx="996.5" cy="803.1406" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M997.4531,799.7813 L997.4531,806.4375 L999.1719,806.4375 Q999.7813,806.4375 1000.0469,806.6719 Q1000.3125,806.9063 1000.3125,807.2969 Q1000.3125,807.6719 1000.0469,807.9063 Q999.7813,808.1406 999.1719,808.1406 L994.0313,808.1406 Q993.4219,808.1406 993.1563,807.9063 Q992.8906,807.6719 992.8906,807.2813 Q992.8906,806.9063 993.1563,806.6719 Q993.4219,806.4375 994.0313,806.4375 L995.75,806.4375 L995.75,799.7813 L994.0313,799.7813 Q993.4219,799.7813 993.1563,799.5469 Q992.8906,799.3125 992.8906,798.9219 Q992.8906,798.5469 993.1563,798.3125 Q993.4219,798.0781 994.0313,798.0781 L999.1719,798.0781 Q999.7813,798.0781 1000.0469,798.3125 Q1000.3125,798.5469 1000.3125,798.9219 Q1000.3125,799.3125 1000.0469,799.5469 Q999.7813,799.7813 999.1719,799.7813 L997.4531,799.7813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="34" x="1010.5" y="808.0508">IEntity</text><rect fill="#FFFFFF" height="17.0938" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" width="49" x="1052.5" y="784.1406"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="47" x="1053.5" y="797.5977">TIdentity</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="982.5" x2="1097.5" y1="819.1406" y2="819.1406"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="86" x="987.5" y="834.5596">Id : TIdentity {get;}</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="982.5" x2="1097.5" y1="840.9766" y2="840.9766"/><path d="M6,299.1406 L6,390.8984 A0,0 0 0 0 6,390.8984 L238,390.8984 A0,0 0 0 0 238,390.8984 L238,349.1406 L321.743,345.1406 L238,341.1406 L238,309.1406 L228,299.1406 L6,299.1406 A0,0 0 0 0 6,299.1406 " fill="#FBFB77" filter="url(#f17qv0zno5aheh)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M228,299.1406 L228,309.1406 L238,309.1406 L228,299.1406 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="12" y="317.6357">Provides base implementations</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="12" y="333.9873">of the</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="48" y="333.9873">IRepository</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="117" y="333.9873">and</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="81" x="142" y="333.9873">IQueryService</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="12" y="350.3389">interfaces, specifically targeting</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="12" y="366.6904">SQL Server. These base classes</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="12" y="383.042">are to be extended by applications.</text><path d="M563.5,30.6406 L563.5,155.1016 A0,0 0 0 0 563.5,155.1016 L748,155.1016 L752,320.9166 L756,155.1016 L940.5,155.1016 A0,0 0 0 0 940.5,155.1016 L940.5,40.6406 L930.5,30.6406 L563.5,30.6406 A0,0 0 0 0 563.5,30.6406 " fill="#FBFB77" filter="url(#f17qv0zno5aheh)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M930.5,30.6406 L930.5,40.6406 L940.5,40.6406 L930.5,30.6406 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="85" x="569.5" y="49.1357">ICarRepository</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="658.5" y="49.1357">can extend</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="726.5" y="49.1357">IRepository</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="11" x="795.5" y="49.1357">or</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="81" x="810.5" y="49.1357">IQueryService</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="569.5" y="65.4873">as needed, and the</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="80" x="684.5" y="65.4873">SqlRepository</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="768.5" y="65.4873">base class provides</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="275" x="569.5" y="81.8389">default implementations for all that functionality.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="573.5" y="98.1904"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="569.5" y="114.542">Because of this,</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="85" x="667.5" y="114.542">ICarRepository</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="756.5" y="114.542">and</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="81" x="781.5" y="114.542">CarRepository</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="866.5" y="114.542">only</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="356" x="569.5" y="130.8936">need to define and implement custom queries and operations,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="268" x="569.5" y="147.2451">as the default operations are handled for them.</text><path d="M1154.5,307.6406 L1154.5,341.1406 L1098.18,345.1406 L1154.5,349.1406 L1154.5,383.0469 A0,0 0 0 0 1154.5,383.0469 L1353.5,383.0469 A0,0 0 0 0 1353.5,383.0469 L1353.5,317.6406 L1343.5,307.6406 L1154.5,307.6406 A0,0 0 0 0 1154.5,307.6406 " fill="#FBFB77" filter="url(#f17qv0zno5aheh)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1343.5,307.6406 L1343.5,317.6406 L1353.5,317.6406 L1343.5,307.6406 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="20" x="1160.5" y="326.1357">Car</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="1184.5" y="326.1357">is built to address specific</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="1160.5" y="342.4873">implementation requiremets for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="1160.5" y="358.8389">things like serialization or</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="1160.5" y="375.1904">database persistance.</text><path d="M1154.5,495.6406 L1154.5,529.1406 L1092.52,533.1406 L1154.5,537.1406 L1154.5,571.0469 A0,0 0 0 0 1154.5,571.0469 L1423.5,571.0469 A0,0 0 0 0 1423.5,571.0469 L1423.5,505.6406 L1413.5,495.6406 L1154.5,495.6406 A0,0 0 0 0 1154.5,495.6406 " fill="#FBFB77" filter="url(#f17qv0zno5aheh)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1413.5,495.6406 L1413.5,505.6406 L1423.5,505.6406 L1413.5,495.6406 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="24" x="1160.5" y="514.1357">ICar</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="1188.5" y="514.1357">is what should largely be used</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="1160.5" y="530.4873">in business logic, because it can</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="1160.5" y="546.8389">enforce constraints better than a class.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="1160.5" y="563.1904">(Read-only properties, no constructor, etc.)</text><path d="M392,992.6406 L392,1117.1016 A0,0 0 0 0 392,1117.1016 L532,1117.1016 A0,0 0 0 0 532,1117.1016 L532,1002.6406 L522,992.6406 L467.305,992.6406 L465.174,904.7956 L459.305,992.6406 L392,992.6406 A0,0 0 0 0 392,992.6406 " fill="#FBFB77" filter="url(#f17qv0zno5aheh)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M522,992.6406 L522,1002.6406 L532,1002.6406 L522,992.6406 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="9" x="398" y="1011.1357">A</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="61" x="411" y="1011.1357">Repository</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="476" y="1011.1357">is an</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="398" y="1027.4873">unordered collection</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="398" y="1043.8389">of unique entities.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="402" y="1060.1904"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="398" y="1076.542">There are both sync-</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="398" y="1092.8936">and async- versions</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="398" y="1109.2451">of this interface.</text><path d="M567,967.6406 L567,1141.1563 A0,0 0 0 0 567,1141.1563 L721,1141.1563 A0,0 0 0 0 721,1141.1563 L721,977.6406 L711,967.6406 L697.525,967.6406 L749.873,869.7346 L689.525,967.6406 L567,967.6406 A0,0 0 0 0 567,967.6406 " fill="#FBFB77" filter="url(#f17qv0zno5aheh)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M711,967.6406 L711,977.6406 L721,977.6406 L711,967.6406 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="9" x="573" y="986.1357">A</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="77" x="586" y="986.1357">QueryService</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="667" y="986.1357">is</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="573" y="1002.4873">only the "read-only"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="573" y="1018.8389">portion of a</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="61" x="641" y="1018.8389">Repository</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="702" y="1018.8389">.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="573" y="1035.1904">This separation helps</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="573" y="1051.542">when implementing</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="573" y="1067.8936">CQ(R)S patterns.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="577" y="1084.2451"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="573" y="1100.5967">There are both sync-</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="573" y="1116.9482">and async- versions</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="573" y="1133.2998">of this interface.</text><path d="M756,1033.1406 L756,1075.8438 A0,0 0 0 0 756,1075.8438 L912,1075.8438 A0,0 0 0 0 912,1075.8438 L912,1043.1406 L902,1033.1406 L833.136,1033.1406 L790.866,869.7346 L825.136,1033.1406 L756,1033.1406 A0,0 0 0 0 756,1033.1406 " fill="#FBFB77" filter="url(#f17qv0zno5aheh)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M902,1033.1406 L902,1043.1406 L912,1043.1406 L902,1033.1406 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="41" x="762" y="1051.6357">TEntity</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="14" x="807" y="1051.6357">is:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="103" x="794" y="1067.9873">IEntity&lt;TIdentity&gt;</text><path d="M947.5,1025.1406 L947.5,1084.1953 A0,0 0 0 0 947.5,1084.1953 L1140.5,1084.1953 A0,0 0 0 0 1140.5,1084.1953 L1140.5,1035.1406 L1130.5,1025.1406 L1047.51,1025.1406 L1040.51,849.3176 L1039.51,1025.1406 L947.5,1025.1406 A0,0 0 0 0 947.5,1025.1406 " fill="#FBFB77" filter="url(#f17qv0zno5aheh)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1130.5,1025.1406 L1130.5,1035.1406 L1140.5,1035.1406 L1130.5,1025.1406 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="953.5" y="1043.6357">TIdentity</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="14" x="1007.5" y="1043.6357">is:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="129" x="985.5" y="1059.9873">IEquatable&lt;TIdentity&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="140" x="985.5" y="1076.3389">IComparable&lt;TIdentity&gt;</text><!--link SqlRepository to DomainServices.CarRepository--><path d="M542.523,345.1406 C595.121,345.1406 654.236,345.1406 696.222,345.1406 " fill="none" id="SqlRepository-DomainServices.CarRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="542.355,352.1406,522.355,345.1406,542.355,338.1406,542.355,352.1406" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="586.25" y="322.6357">extends</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="71" x="573.75" y="338.9873">&lt;Car, Guid&gt;</text><!--link SqlRepository to IRepository--><path d="M424.883,376.3206 C431.207,442.5086 446.552,603.1146 456.866,711.0766 " fill="none" id="SqlRepository-IRepository" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="463.86,710.6796,458.794,731.2546,449.924,712.0116,463.86,710.6796" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="450" y="538.6357">implements</text><!--link DomainServices.CarRepository to Domain.Car--><path d="M820.664,345.1406 C862.474,345.1406 915.756,345.1406 957.837,345.1406 " fill="none" id="DomainServices.CarRepository-Domain.Car" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#FFFFFF" points="807.521,345.1406,813.521,349.1406,819.521,345.1406,813.521,341.1406,807.521,345.1406" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="833.75" y="338.6357">actually contains</text><!--link DomainServices.CarRepository to DomainServices.ICarRepository--><path d="M752,369.3216 C752,392.3576 752,428.8626 752,461.4736 " fill="none" id="DomainServices.CarRepository-DomainServices.ICarRepository" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="759,461.6386,752,481.6386,745,461.6386,759,461.6386" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="753" y="448.1357">implements</text><!--link Domain.Car to Domain.ICar--><path d="M1031.71,403.7186 C1032.89,421.9746 1034.21,442.3716 1035.44,461.4396 " fill="none" id="Domain.Car-Domain.ICar" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="1042.43,461.0356,1036.73,481.4446,1028.46,461.9366,1042.43,461.0356" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="1035" y="448.1357">implements</text><!--link DomainServices.ICarRepository to Domain.ICar--><path d="M915.199,533.1406 C941.318,533.1406 966.578,533.1406 987.46,533.1406 " fill="none" id="DomainServices.ICarRepository-Domain.ICar" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="901.905,533.1406,907.905,537.1406,913.905,533.1406,907.905,529.1406,901.905,533.1406" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="920" y="526.6357">contains</text><!--link DomainServices.ICarRepository to IRepository--><path d="M701.048,584.7356 C664.062,621.4606 612.809,672.3546 567.69,717.1566 " fill="none" id="DomainServices.ICarRepository-IRepository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="572.407,722.3386,553.283,731.4636,562.542,712.4036,572.407,722.3386" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="659.5" y="655.1357">extends</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="75" x="645" y="671.4873">&lt;ICar, Guid&gt;</text><!--link Domain.ICar to IEntity--><path d="M1040,584.7356 C1040,636.2066 1040,715.5086 1040,766.8646 " fill="none" id="Domain.ICar-IEntity" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1047,767.0016,1040,787.0016,1033,767.0016,1047,767.0016" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="1041" y="655.1357">extends</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="43" x="1042.5" y="671.4873">&lt;Guid&gt;</text><!--link IRepository to IQueryService--><path d="M579.639,818.1406 C599.904,818.1406 621.23,818.1406 642.094,818.1406 " fill="none" id="IRepository-IQueryService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="642.324,811.1406,662.324,818.1406,642.324,825.1406,642.324,811.1406" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="598" y="811.6357">extends</text><!--link IQueryService to IEntity--><path d="M908.978,818.1406 C934.3,818.1406 959.647,818.1406 981.208,818.1406 " fill="none" id="IQueryService-IEntity" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="895.759,818.1406,901.759,822.1406,907.759,818.1406,901.759,814.1406,895.759,818.1406" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="914" y="811.6357">contains</text><!--
@startuml Repository


title Repository Pattern

node "Custom App" as AppDll #Orange {
	namespace Domain #White {
		class Car {
			+ Id : Guid {get; set;}
			+ Name : string {get; set;}
			+ Model : string {get; set;}
			+ Vin : string {get; set;}
			+ Color : Color {get; set;}
		}

		interface ICar {
			Name : string {get;}
			Model : string {get;}
			Vin : string {get;}
			Color : Color {get;}
		}
	}

	namespace DomainServices #White {
		class CarRepository

		interface ICarRepository {
			GetByName(string value) : IEnumerable<ICar>
			GetByModelAsync(string value) : Task<IEnumerable<ICar>>
			GetByVinAsync(string value) : Task<ICar>
			Paint(ICar car, Color color)
		}
	}
}

node "OnionSeed.Data.SqlServer.dll" as SqlServer #LightGreen {
	abstract class SqlRepository<TEntity,TIdentity> {
		+ ctor(SqlConnection connection)
	}
}

node "OnionSeed.Data.dll" as OnionSeed #LightBlue {
	interface IRepository<TEntity,TIdentity> {
		AddAsync(TEntity item) : Task
		AddOrUpdateAsync(TEntity item) : Task
		UpdateAsync(TEntity item) : Task
		RemoveAsync(TEntity item) : Task
		RemoveAsync(TIdentity id) : Task
		TryAddAsync(TEntity item) : Task<bool>
		TryUpdateAsync(TEntity item) : Task<bool>
		TryRemoveAsync(TEntity item) : Task<bool>
		TryRemoveAsync(TIdentity id) : Task<bool>
	}

	interface IQueryService<TEntity,TIdentity> {
		GetCountAsync() : Task<long>
		GetAllAsync() : Task<IEnumerable<TEntity>>
		GetByIdAsync(TIdentity id) : Task<TEntity>
		TryGetByIdAsync(TIdentity id) : Task<TEntity>
	}

	interface IEntity<TIdentity> {
		Id : TIdentity {get;}
	}
}

note left of SqlRepository
	Provides base implementations
	of the <i>IRepository</i> and <i>IQueryService</i>
	interfaces, specifically targeting
	SQL Server. These base classes
	are to be extended by applications.
end note

SqlRepository <|- DomainServices.CarRepository : extends\n<i><Car, Guid></i>
SqlRepository ...|> IRepository : implements

DomainServices.CarRepository o. Domain.Car : actually contains
DomainServices.CarRepository ..|> DomainServices.ICarRepository : implements

Domain.Car ..|> Domain.ICar : implements

DomainServices.ICarRepository o- Domain.ICar : contains
DomainServices.ICarRepository - -|> IRepository : extends\n<i><ICar, Guid></i>

Domain.ICar - -|> IEntity : extends\n<i><Guid></i>

IRepository -|> IQueryService : extends

IQueryService o- IEntity : contains

note top of DomainServices.CarRepository
	<i>ICarRepository</i> can extend <i>IRepository</i> or <i>IQueryService</i>
	as needed, and the <i>SqlRepository</i> base class provides
	default implementations for all that functionality.

	Because of this, <i>ICarRepository</i> and <i>CarRepository</i> only
	need to define and implement custom queries and operations,
	as the default operations are handled for them.
end note

note right of Domain.Car
	<i>Car</i> is built to address specific
	implementation requiremets for
	things like serialization or
	database persistance.
end note

note right of Domain.ICar
	<i>ICar</i> is what should largely be used
	in business logic, because it can
	enforce constraints better than a class.
	(Read-only properties, no constructor, etc.)
end note

note bottom of IRepository
	A <i>Repository</i> is an
	unordered collection
	of unique entities.

	There are both sync-
	and async- versions
	of this interface.
end note

note bottom of IQueryService
	A <i>QueryService</i> is
	only the "read-only"
	portion of a <i>Repository</i>.
	This separation helps 
	when implementing
	CQ(R)S patterns.

	There are both sync-
	and async- versions
	of this interface.
end note

note bottom of IQueryService
	<i>TEntity</i> is:
		<i>IEntity<TIdentity></i>
end note

note bottom of IEntity
	<i>TIdentity</i> is:
		<i>IEquatable<TIdentity></i>
		<i>IComparable<TIdentity></i>
end note

@enduml

PlantUML version 1.2019.03(Sun Mar 10 05:04:44 MDT 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 11.0.1+13-LTS
Operating System: Windows 10
OS Version: 10.0
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>